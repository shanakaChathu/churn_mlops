schema: '2.0'
stages:
  raw_dataset_creation:
    cmd: python src/data/get_data.py --config=params.yaml
    deps:
    - path: data/external/train.csv
      md5: 8929517566f004183dff480fdd48afe0
      size: 391872
    - path: src/data/get_data.py
      md5: 23b6a2e834f0f65b79b8ead91f60049f
      size: 2678
    outs:
    - path: data/raw/test_week1.csv
      md5: 9fa5eb634e0fae0ea97554fbb4926827
      size: 59063
    - path: data/raw/test_week2.csv
      md5: 241aea5f0c5951d7a3bb5f118a60e6a5
      size: 59203
    - path: data/raw/train.csv
      md5: e7e56c645b29ef0eec041e1293327ed1
      size: 274282
  split_data:
    cmd: python src/data/split_data.py --config=params.yaml
    deps:
    - path: data/raw/train.csv
      md5: e7e56c645b29ef0eec041e1293327ed1
      size: 274282
    - path: src/data/split_data.py
      md5: 90ef0074352427cd41b1b8e41796eb74
      size: 1242
    outs:
    - path: data/processed/churn_test.csv
      md5: cbe461f611a83ee82666622dbaee8e2b
      size: 55173
    - path: data/processed/churn_train.csv
      md5: 5821af312e680407f3472f56e405e9bc
      size: 219447
  train_and_evaluate:
    cmd: python src/models/train_model.py --config=params.yaml
    deps:
    - path: data/processed/churn_test.csv
      md5: cbe461f611a83ee82666622dbaee8e2b
      size: 55173
    - path: data/processed/churn_train.csv
      md5: 5821af312e680407f3472f56e405e9bc
      size: 219447
    - path: src/models/train_model.py
      md5: ef333f57950729f69601eabc4b8d8c68
      size: 4345
    params:
      params.yaml:
        random_forest.max_depth: 2
        random_forest.max_features: 2
  log_production_model:
    cmd: python src/models/log_production_model.py --config=params.yaml
    deps:
    - path: src/models/log_production_model.py
      md5: 05777c1315dd3d153303438f0557cd13
      size: 1738
    outs:
    - path: models/model.joblib
      md5: 1766d66d3f17293b62f490025dcc0610
      size: 1881626
  prediction_service:
    cmd: python src/prediction_service/prediction.py --config=params.yaml
    deps:
    - path: data/raw/test_week1.csv
      md5: 9fa5eb634e0fae0ea97554fbb4926827
      size: 59063
    - path: models/model.joblib
      md5: 1766d66d3f17293b62f490025dcc0610
      size: 1881626
    - path: src/prediction_service/prediction.py
      md5: 907516105ea885d1db8601060bc74987
      size: 1383
    outs:
    - path: data/prediction/prediction.csv
      md5: 27f3e3f6f5c60cb85caf66f568358bfa
      size: 61045
